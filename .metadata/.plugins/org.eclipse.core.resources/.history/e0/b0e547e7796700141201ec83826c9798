import lejos.nxt.ColorSensor;
import lejos.nxt.UltrasonicSensor;


public class LightSensorPoller {
	private UltrasonicSensor sensor;
	private int usDist;
	private static final long UPDATE_PERIOD = 20;
	
	/**Ultrasonic Controller takes a ultrasonic sensor, and collects data from it.
	 * @param port 		The Ultrasonic sensor which will be polled.
	 */
	public LightSensorPoller(ColorSensor us){
		sensor = us;
	}
	
	/** Returns the distances stored in the poller
	 * 
	 * @return The distance stored locally (NOT DIRECTLY FROM ULTRASONIC SENSOR)
	 */
	public int getDist(){
		return usDist;
	}
	
	public void run(){
	long start,end;
		while(true){
			start = System.currentTimeMillis();
			this.usDist = sensor.getDistance();
			end = System.currentTimeMillis();
			if(end - start < UPDATE_PERIOD){
				try{
					Thread.sleep(UPDATE_PERIOD - (end - start));
				}
				catch(InterruptedException e){
					//Nothing, mang
				}
			}
		}
	}
}
